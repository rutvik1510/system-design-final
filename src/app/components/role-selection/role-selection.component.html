<div class="role-selection-container">
  <div class="card shadow-lg">
    <div class="card-body p-5">
      <div class="text-center mb-4">
        <h1 class="display-6 fw-bold text-primary">
          <i class="bi bi-mortarboard-fill me-2"></i>
          EdTech Training Management
        </h1>
        <p class="text-muted">Financial & Training Management System</p>
      </div>

      <!-- Role Selection Buttons -->
      @if (!selectedRole()) {
        <div class="role-buttons">
          <h4 class="text-center mb-4">Select Your Role to Login</h4>
          
          <div class="d-grid gap-3">
            <button class="btn btn-primary btn-lg d-flex align-items-center justify-content-center gap-2" 
                    (click)="selectRole('admin')">
              <i class="bi bi-shield-lock-fill"></i>
              Login as Admin
            </button>
            
            <button class="btn btn-success btn-lg d-flex align-items-center justify-content-center gap-2" 
                    (click)="selectRole('trainer')">
              <i class="bi bi-person-workspace"></i>
              Login as Trainer
            </button>
            
            <button class="btn btn-info btn-lg d-flex align-items-center justify-content-center gap-2 text-white" 
                    (click)="selectRole('client')">
              <i class="bi bi-building"></i>
              Login as Client
            </button>
          </div>
        </div>
      }

      <!-- Login Form -->
      @if (selectedRole()) {
        <div class="login-form">
          <div class="text-center mb-4">
            <span class="badge bg-secondary fs-6 text-capitalize">
              @if (selectedRole() === 'admin') {
                <i class="bi bi-shield-lock-fill me-1"></i>
              } @else if (selectedRole() === 'trainer') {
                <i class="bi bi-person-workspace me-1"></i>
              } @else {
                <i class="bi bi-building me-1"></i>
              }
              {{ selectedRole() }} Login
            </span>
          </div>

          @if (errorMessage()) {
            <div class="alert alert-danger" role="alert">
              <i class="bi bi-exclamation-triangle-fill me-2"></i>
              {{ errorMessage() }}
            </div>
          }

          <form (ngSubmit)="login()">
            <div class="mb-3">
              <label for="username" class="form-label">Username</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-person-fill"></i></span>
                <input type="text" 
                       class="form-control" 
                       id="username" 
                       [ngModel]="username()"
                       (ngModelChange)="username.set($event)"
                       name="username"
                       placeholder="Enter username"
                       required>
              </div>
            </div>

            <div class="mb-4">
              <label for="password" class="form-label">Password</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
                <input type="password" 
                       class="form-control" 
                       id="password" 
                       [ngModel]="password()"
                       (ngModelChange)="password.set($event)"
                       name="password"
                       placeholder="Enter password"
                       required>
              </div>
            </div>

            <div class="d-grid gap-2">
              <button type="submit" 
                      class="btn btn-primary btn-lg" 
                      [disabled]="isLoading()">
                @if (isLoading()) {
                  <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                  Logging in...
                } @else {
                  <i class="bi bi-box-arrow-in-right me-2"></i>
                  Login
                }
              </button>
              
              <button type="button" 
                      class="btn btn-outline-secondary" 
                      (click)="goBack()">
                <i class="bi bi-arrow-left me-2"></i>
                Back to Role Selection
              </button>
            </div>
          </form>

          <div class="mt-4 p-3 bg-light rounded">
            <small class="text-muted">
              <i class="bi bi-info-circle me-1"></i>
              <strong>Demo Credentials:</strong><br>
              @if (selectedRole() === 'admin') {
                Username: <code>admin</code> | Password: <code>admin123</code>
              } @else if (selectedRole() === 'trainer') {
                Username: <code>trainer</code> | Password: <code>trainer123</code>
              } @else {
                Username: <code>client</code> | Password: <code>client123</code>
              }
            </small>
          </div>
        </div>
      }
    </div>
  </div>
</div>
