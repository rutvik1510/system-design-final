<div class="trainers">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0">
      <i class="bi bi-people me-2"></i>
      Trainers
      <span class="badge bg-secondary ms-2">{{ trainers().length }}</span>
    </h2>
  </div>

  <!-- Loading State -->
  @if (isLoading()) {
    <div class="text-center p-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  }

  <!-- Trainers Grid -->
  @if (!isLoading()) {
    @if (trainers().length > 0) {
      <div class="row g-4">
        @for (trainer of trainers(); track trainer.id) {
          <div class="col-md-6 col-lg-4">
            <div class="card border-0 shadow-sm h-100 trainer-card">
              <div class="card-body">
                <div class="d-flex align-items-start mb-3">
                  <div class="trainer-avatar bg-success text-white">
                    {{ trainer.name.charAt(0).toUpperCase() }}
                  </div>
                  <div class="ms-3 flex-grow-1">
                    <h5 class="mb-0">{{ trainer.name }}</h5>
                    <small class="text-muted">{{ trainer.email }}</small>
                    <div class="mt-1">
                      <span class="badge" [class]="getAvailabilityBadgeClass(trainer.availability)">
                        {{ trainer.availability }}
                      </span>
                    </div>
                  </div>
                </div>
                
                <!-- Stats Row -->
                <div class="d-flex justify-content-between text-center mb-3 p-2 bg-light rounded">
                  <div>
                    <div class="fw-bold text-success">{{ trainer.rating || 0 }}</div>
                    <small class="text-muted">Rating</small>
                  </div>
                  <div>
                    <div class="fw-bold text-primary">{{ trainer.yearsOfExperience || 0 }}</div>
                    <small class="text-muted">Years</small>
                  </div>
                  <div>
                    <div class="fw-bold text-info">{{ trainer.totalTrainings || 0 }}</div>
                    <small class="text-muted">Trainings</small>
                  </div>
                  <div>
                    <div class="fw-bold text-warning">${{ trainer.hourlyRate || 0 }}</div>
                    <small class="text-muted">/hr</small>
                  </div>
                </div>

                <!-- Expertise Tags -->
                <div class="mb-3">
                  <small class="text-muted d-block mb-1">Expertise:</small>
                  <div class="d-flex flex-wrap gap-1">
                    @if (trainer.expertise && trainer.expertise.length > 0) {
                      @for (tech of trainer.expertise.slice(0, 4); track tech) {
                        <span class="badge bg-primary bg-opacity-75">{{ tech }}</span>
                      }
                      @if (trainer.expertise.length > 4) {
                        <span class="badge bg-secondary">+{{ trainer.expertise.length - 4 }}</span>
                      }
                    } @else {
                      <span class="text-muted small">No expertise listed</span>
                    }
                  </div>
                </div>

                <button class="btn btn-outline-primary btn-sm w-100" (click)="openDetailsModal(trainer)">
                  <i class="bi bi-eye me-1"></i>
                  View Full Profile
                </button>
              </div>
            </div>
          </div>
        }
      </div>
    } @else {
      <div class="card border-0 shadow-sm">
        <div class="card-body text-center p-5 text-muted">
          <i class="bi bi-people fs-1 d-block mb-3"></i>
          <h5>No Trainers Yet</h5>
          <p>Trainers can register and build their profiles from the Trainer portal.</p>
        </div>
      </div>
    }
  }
</div>

<!-- Trainer Details Modal -->
@if (showDetailsModal() && selectedTrainer()) {
  <div class="modal-backdrop fade show"></div>
  <div class="modal fade show d-block" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <i class="bi bi-person-badge me-2"></i>
            Trainer Profile
          </h5>
          <button type="button" class="btn-close" (click)="closeDetailsModal()"></button>
        </div>
        <div class="modal-body">
          <!-- Header -->
          <div class="text-center mb-4">
            <div class="trainer-avatar-large bg-success text-white mx-auto mb-3">
              {{ selectedTrainer()!.name.charAt(0).toUpperCase() }}
            </div>
            <h4 class="mb-1">{{ selectedTrainer()!.name }}</h4>
            <p class="text-muted mb-2">{{ selectedTrainer()!.email }}</p>
            <span class="badge" [class]="getAvailabilityBadgeClass(selectedTrainer()!.availability)">
              {{ selectedTrainer()!.availability }}
            </span>
          </div>

          <!-- Stats -->
          <div class="row text-center mb-4">
            <div class="col-3">
              <div class="p-3 bg-light rounded">
                <h4 class="mb-0 text-success">{{ selectedTrainer()!.rating || 0 }}</h4>
                <small class="text-muted">Rating</small>
              </div>
            </div>
            <div class="col-3">
              <div class="p-3 bg-light rounded">
                <h4 class="mb-0 text-primary">{{ selectedTrainer()!.yearsOfExperience || 0 }}</h4>
                <small class="text-muted">Years Exp</small>
              </div>
            </div>
            <div class="col-3">
              <div class="p-3 bg-light rounded">
                <h4 class="mb-0 text-info">{{ selectedTrainer()!.totalTrainings || 0 }}</h4>
                <small class="text-muted">Trainings</small>
              </div>
            </div>
            <div class="col-3">
              <div class="p-3 bg-light rounded">
                <h4 class="mb-0 text-warning">${{ selectedTrainer()!.hourlyRate || 0 }}</h4>
                <small class="text-muted">/hour</small>
              </div>
            </div>
          </div>

          <!-- Contact Info -->
          <div class="row mb-4">
            <div class="col-md-6">
              <h6 class="text-muted">Phone</h6>
              <p><i class="bi bi-telephone me-2"></i>{{ selectedTrainer()!.phone || 'Not provided' }}</p>
            </div>
            <div class="col-md-6">
              <h6 class="text-muted">LinkedIn</h6>
              @if (selectedTrainer()!.linkedIn) {
                <p><i class="bi bi-linkedin me-2"></i>{{ selectedTrainer()!.linkedIn }}</p>
              } @else {
                <p class="text-muted">Not provided</p>
              }
            </div>
          </div>

          <!-- Bio -->
          <div class="mb-4">
            <h6 class="text-muted">About</h6>
            <p>{{ selectedTrainer()!.bio || 'No bio available.' }}</p>
          </div>

          <!-- Expertise -->
          <div class="mb-4">
            <h6 class="text-muted">Technologies & Expertise</h6>
            <div class="d-flex flex-wrap gap-2">
              @if (selectedTrainer()!.expertise && selectedTrainer()!.expertise.length > 0) {
                @for (tech of selectedTrainer()!.expertise; track tech) {
                  <span class="badge bg-primary">{{ tech }}</span>
                }
              } @else {
                <span class="text-muted">No expertise listed</span>
              }
            </div>
          </div>

          <!-- Certifications -->
          <div>
            <h6 class="text-muted">Certifications</h6>
            @if (selectedTrainer()!.certifications && selectedTrainer()!.certifications.length > 0) {
              <ul class="list-unstyled">
                @for (cert of selectedTrainer()!.certifications; track cert) {
                  <li class="mb-1">
                    <i class="bi bi-award text-warning me-2"></i>{{ cert }}
                  </li>
                }
              </ul>
            } @else {
              <p class="text-muted">No certifications listed</p>
            }
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closeDetailsModal()">Close</button>
        </div>
      </div>
    </div>
  </div>
}
